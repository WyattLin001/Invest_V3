# 群組對話系統測試指南

## 📋 測試概覽

這個測試系統旨在全面檢測你的群組對話系統的前端、後端和 Supabase 數據庫連接是否正常運作。

## 🚀 快速開始

### 1. 測試按鈕位置

**主界面測試區域**（僅在 DEBUG 模式下顯示）：
- 位置：HomeView 投資動作區域下方
- 功能：實時顯示系統狀態並提供快速測試

**詳細測試界面**：
- 通過主界面測試區域的"詳細測試"按鈕進入
- 提供完整的測試功能

### 2. 測試類型

#### 🏃 快速測試（推薦）
- **測試項目**：
  - Supabase 數據庫連接
  - 群組功能基本操作
  - 聊天功能基本檢查
- **適用場景**：日常開發檢查
- **執行時間**：約 3-5 秒

#### 🔍 詳細測試
- **測試項目**：
  - 包含快速測試所有項目
  - 群組創建權限檢查
  - 群組加入功能測試
  - 訊息發送功能測試
  - 數據庫完整性檢查
- **適用場景**：功能開發完成後的全面檢查
- **執行時間**：約 10-15 秒

#### ⚡ 壓力測試
- **測試項目**：
  - 並發操作測試（5個同時請求）
  - 大量數據載入測試
  - 連接穩定性測試（連續3次請求）
- **適用場景**：性能評估和系統穩定性檢查
- **執行時間**：約 8-12 秒

## 📊 測試結果解讀

### 狀態指示器

| 狀態 | 圖示 | 顏色 | 含義 |
|------|------|------|------|
| ✅ 成功 | checkmark.circle.fill | 綠色 | 功能正常運作 |
| ❌ 錯誤 | xmark.circle.fill | 紅色 | 功能異常，需要修復 |
| ⚠️ 警告 | exclamationmark.triangle.fill | 橙色 | 功能受限，但基本可用 |
| 🔄 測試中 | clock.fill | 藍色 | 正在執行測試 |
| ❓ 未知 | questionmark.circle | 灰色 | 尚未測試 |

### 具體測試項目說明

#### 1. Supabase 連接測試
- **檢查內容**：數據庫連接、基本查詢功能
- **成功標準**：能夠成功獲取群組列表
- **常見問題**：
  - 網絡連接問題
  - Supabase 配置錯誤
  - API 密鑰失效

#### 2. 群組功能測試
- **檢查內容**：群組列表獲取、用戶群組查詢
- **成功標準**：能夠獲取群組數據且數據結構正確
- **警告情況**：數據為空但查詢成功
- **常見問題**：
  - 數據表結構不匹配
  - 權限設置問題

#### 3. 聊天功能測試
- **檢查內容**：群組詳情獲取、聊天相關功能
- **成功標準**：能夠成功獲取群組詳細資訊
- **警告情況**：用戶未加入任何群組
- **常見問題**：
  - 群組成員關係表問題
  - 聊天消息表結構問題

## 🛠️ 故障排除

### 常見錯誤及解決方案

#### 1. "連接失敗" 錯誤
```
檢查清單：
□ 網絡連接是否正常
□ Supabase URL 和 API Key 是否正確
□ Supabase 服務是否正常運行
□ 防火牆是否阻止連接
```

#### 2. "群組功能異常" 錯誤
```
檢查清單：
□ investment_groups 表是否存在
□ 表結構是否符合 InvestmentGroup 模型
□ RLS (Row Level Security) 政策是否正確設置
□ 用戶是否有查詢權限
```

#### 3. "聊天功能異常" 錯誤
```
檢查清單：
□ group_members 表是否存在
□ chat_messages 表是否存在
□ 外鍵關係是否正確設置
□ 用戶是否加入了任何群組
```

#### 4. "數據庫完整性測試失敗" 錯誤
```
檢查清單：
□ 所有相關表是否存在
□ 表之間的關聯是否正確
□ 數據類型是否匹配
□ 約束條件是否正確
```

## 📈 性能標準

### 響應時間標準
- **優秀**：< 2 秒
- **良好**：2-5 秒  
- **需要優化**：> 5 秒

### 並發處理標準
- **成功率**：≥ 95%
- **平均響應時間**：< 3 秒
- **最大響應時間**：< 10 秒

## 🔧 開發建議

### 1. 日常開發流程
1. 每次啟動開發時運行**快速測試**
2. 功能開發完成後運行**詳細測試**
3. 部署前運行**壓力測試**

### 2. 測試數據準備
- 確保測試環境有基本的群組數據
- 確保測試用戶加入了至少一個群組
- 定期清理測試數據，避免數據污染

### 3. 監控關鍵指標
- **系統狀態**：定期檢查整體系統健康度
- **響應時間**：監控各功能的響應速度
- **錯誤率**：追蹤錯誤發生頻率和類型

## 📝 測試報告解讀

測試完成後，系統會提供詳細的測試報告，包括：

- **測試名稱**：具體測試項目
- **執行狀態**：成功/失敗/警告
- **執行時間**：測試耗時
- **詳細信息**：具體的測試結果和數據
- **錯誤信息**：失敗時的具體錯誤描述

## 🎯 最佳實踐

1. **定期測試**：建議每天開發開始前運行快速測試
2. **完整測試**：重要功能修改後運行詳細測試
3. **性能測試**：部署前運行壓力測試
4. **錯誤追蹤**：記錄和追蹤重複出現的錯誤
5. **數據備份**：測試前備份重要數據

## ⚠️ 注意事項

- 測試功能僅在 DEBUG 模式下可見
- 壓力測試可能對服務器造成負載，請謹慎使用
- 測試過程中請勿進行其他數據庫操作
- 如遇到持續失敗，請檢查網絡連接和服務器狀態

---

**🔄 最後更新**：2025年8月2日  
**📞 技術支持**：如遇問題請檢查 Console 日誌或聯繫開發團隊