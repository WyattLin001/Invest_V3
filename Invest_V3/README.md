# Invest_V3 iOS 應用程式

## 📱 應用概述

Invest_V3 是一款台灣投資競賽社交應用程式，結合了模擬投資、社群聊天、投資資訊和虛擬禮物系統。應用程式採用 LINE 風格的 UI 設計，提供真實的投資體驗和社交互動。

## 🚀 M1 (v0.1) 完成功能

### ✅ 核心架構
- **5 Tab 導航框架**: Home, Chat, Info, Wallet, Settings
- **Supabase 後端整合**: 完整的 RLS 安全政策
- **Design Tokens 系統**: 統一的品牌色彩和間距規範
- **響應式 UI**: 支援深色模式的現代化介面

### ✅ 主頁功能 (HomeView)
- **冠軍輪播**: 本週/本季/本年冠軍展示
- **投資群組列表**: 可篩選的投資競賽群組
- **類別篩選**: 科技股、綠能、短期投機、價值投資等
- **即時排行榜**: 動態更新的投資績效排名

### ✅ 聊天功能 (ChatView)
- **群組聊天**: 基本的 CRUD 聊天功能
- **投資指令系統**: 特殊格式的買賣指令 `[買入] 台積電 50000`
- **投資面板**: 可折疊的投資操作界面
- **投資組合圓環圖**: 即時顯示持股分布

### ✅ 資訊功能 (InfoView)
- **文章列表**: 投資相關文章展示
- **免費/付費標籤**: 清楚標示文章類型
- **類別篩選**: 多種投資主題分類
- **搜尋功能**: 支援標題、作者、內容搜尋

### ✅ 錢包功能 (WalletView)
- **虛擬貨幣系統**: NTD 餘額管理
- **禮物商店**: 花束(100)、火箭(1000)、黃金(5000)
- **交易記錄**: 完整的金流追蹤
- **訂閱管理**: Premium 會員系統

### ✅ 設定功能 (SettingsView)
- **個人資料管理**: 頭像、暱稱、QR Code
- **好友系統**: 添加和管理好友
- **通知設定**: 細緻的推播控制
- **應用設定**: 深色模式、語言切換

### ✅ 台股整合
- **Alpha Vantage API**: 5檔熱門台股報價
- **模擬交易**: 完整的買賣功能
- **投資組合管理**: CRUD 操作和績效計算
- **即時更新**: 股價和持股價值同步

### ✅ 資料庫設計
- **15張表格**: 完整的資料結構
- **RLS 安全政策**: 行級安全控制
- **用戶權限管理**: 精細的資料存取控制
- **關聯設計**: 正規化的資料庫架構

## 🎨 Design Tokens

### 品牌色彩
- **主要綠色** (#00B900): 主要 CTA、Toggle ON
- **品牌橙色** (#FD7E14): 付費/警示 CTA
- **品牌藍色** (#007BFF): 投資指令高亮

### 語意色彩 (支援深色模式)
- **背景 Layer 1**: Light #F7F7F7 / Dark #121212
- **背景 Layer 2**: Light #EEEEEE / Dark #1E1E1E
- **主要文本**: Light #1E1E1E / Dark #E0E0E0
- **次要文本**: Light #6C757D / Dark #9E9E9E

### 間距系統
- **XS**: 4pt, **SM**: 8pt, **MD**: 16pt, **LG**: 24pt, **XL**: 32pt

## 🏗️ 技術架構

### 前端 (iOS)
- **SwiftUI**: 現代化的宣告式 UI 框架
- **MVVM 模式**: 清晰的架構分離
- **Combine**: 響應式程式設計
- **Async/Await**: 現代化的非同步處理

### 後端 (Supabase)
- **PostgreSQL**: 主要資料庫
- **Row Level Security**: 資料安全保護
- **Real-time**: 即時資料同步 (預留)
- **Authentication**: 用戶認證系統

### 外部服務
- **Alpha Vantage**: 股票報價 API
- **StoreKit**: 應用內購買 (預留)

## 📊 資料庫結構

### 核心表格
1. **user_profiles**: 用戶資料
2. **investment_groups**: 投資群組
3. **articles**: 投資文章
4. **chat_messages**: 聊天訊息
5. **portfolio_transactions**: 投資交易
6. **wallet_transactions**: 錢包交易
7. **user_balances**: 用戶餘額
8. **gifts**: 禮物商品
9. **user_gifts**: 用戶禮物
10. **article_likes**: 文章按讚
11. **article_comments**: 文章評論
12. **creator_bonuses**: 創作者獎金
13. **group_members**: 群組成員
14. **weekly_rankings**: 週排行榜
15. **user_portfolios**: 投資組合

## 🎯 下一階段 (M2) 規劃

### 即時功能
- WebSocket 聊天
- 即時股價更新
- 推播通知

### 社交功能
- 好友邀請系統
- 群組創建
- 社交分享

### 進階投資功能
- 更多股票選擇
- 技術分析圖表
- 投資策略分享

### 商業化功能
- 應用內購買
- 廣告系統
- 付費會員功能

## 🛠️ 開發環境

- **Xcode**: 15.0+
- **iOS**: 17.0+
- **Swift**: 5.9+
- **Supabase**: Latest
- **MCP**: Model Context Protocol

## 📱 UI 規範

### 卡片尺寸
- **文章卡片**: 343×116 pt
- **投資群組卡片**: 全寬度，動態高度
- **冠軍卡片**: 343×80 pt

### 動畫規範
- **標準動畫**: 0.3秒 easeInOut
- **快速動畫**: 0.2秒 easeOut
- **慢速動畫**: 0.5秒 easeInOut

## 🔐 安全考量

- **RLS 政策**: 所有敏感資料都有行級安全控制
- **用戶認證**: Supabase Auth 整合
- **資料驗證**: 前後端雙重驗證
- **API 安全**: 適當的速率限制和錯誤處理

---

**開發團隊**: 林家麒  
**版本**: M1 (v0.1)  
**最後更新**: 2025年1月 