# 🏆 錦標賽功能測試指南

> **完整的五層架構測試系統，確保錦標賽功能穩定可靠**

## 🚀 快速開始

### 1. 打開測試界面
- 在 HomeView 主界面右上角點擊 **🏆 測試** 按鈕
- 或者在錢包餘額卡片右側找到測試圖標

### 2. 選擇測試層級
- **全部測試** - 執行所有測試
- **基礎模型** - 測試數據模型和計算邏輯
- **服務層** - 測試 API 和數據處理
- **業務邏輯** - 測試投資和交易邏輯
- **整合測試** - 測試完整用戶流程
- **UI互動** - 測試界面響應

### 3. 執行測試
- 點擊單個測試項目的播放按鈕
- 或點擊 **執行完整測試套件** 運行所有測試

## 📋 測試架構說明

### 第一層：基礎模型測試
**目標**: 驗證資料結構完整性和計算邏輯正確性

- ✅ **Tournament 模型驗證**
  - 測試錦標賽基本屬性初始化
  - 驗證計算屬性 (participationPercentage, timeRemaining)
  - 檢查邊界條件和錯誤處理

- ✅ **TournamentParticipant 測試**
  - 驗證參賽者指標計算 (回報率、勝率、排名變化)
  - 測試邊界情況 (負回報、零交易)

- ✅ **投資組合模型測試**
  - 檢查投資組合價值計算
  - 驗證現金比例和持股計算
  - 測試未實現損益計算

- ✅ **績效指標模型測試**
  - 驗證回報率、夏普比率等計算
  - 測試最大回撤計算
  - 檢查指標範圍合理性

### 第二層：服務層測試
**目標**: 確保 API 調用和資料處理穩定性

- 🌐 **TournamentService API**
  - 測試錦標賽數據獲取和操作
  - 驗證過濾和搜尋功能
  - 檢查報名和退出流程

- ☁️ **Supabase 整合測試**
  - 驗證即時數據同步功能
  - 測試連接穩定性
  - 檢查數據一致性

- ⚠️ **錯誤處理測試**
  - 模擬網路錯誤、超時等場景
  - 驗證錯誤恢復機制
  - 測試用戶友好的錯誤提示

### 第三層：業務邏輯測試
**目標**: 驗證核心投資和交易邏輯

- 💼 **投資組合管理器**
  - 測試交易執行邏輯
  - 驗證資金管理機制
  - 檢查費用計算正確性

- 📊 **排名系統測試**
  - 驗證排序算法正確性
  - 測試排名變動檢測
  - 檢查並行情況處理

- 🛡️ **風險控制測試**
  - 測試最大回撤限制
  - 驗證持股比例控制
  - 檢查違規檢測機制

### 第四層：整合測試
**目標**: 驗證完整使用者流程

- 🔄 **完整參賽流程**
  - 從報名到競賽結束的全流程測試
  - 驗證狀態轉換正確性
  - 檢查數據一致性

- ⚡ **即時更新測試**
  - 驗證背景數據刷新機制
  - 測試多用戶並發更新
  - 檢查數據同步延遲

- 🏋️ **效能壓力測試**
  - 大數據量處理能力驗證 (1000+ 參賽者)
  - 測試響應時間和記憶體使用
  - 檢查系統穩定性

### 第五層：UI 互動測試
**目標**: 確保用戶界面響應正確

- 🔍 **錦標賽選擇界面**
  - 測試篩選標籤功能
  - 驗證搜尋和排序
  - 檢查數據顯示正確性

- 📈 **排行榜顯示測試**
  - 驗證排名數據展示
  - 測試互動響應性
  - 檢查即時更新顯示

- 🃏 **卡片組件測試**
  - 檢查卡片狀態顯示
  - 測試按鈕互動功能
  - 驗證響應式設計

## 📊 測試結果解讀

### 成功率指標
- **🟢 80%+ 成功率**: 系統運行良好
- **🟡 60-80% 成功率**: 需要關注部分問題
- **🔴 <60% 成功率**: 需要重點修復

### 執行時間分析
- **⚡ <0.1秒**: 優秀的響應速度
- **✅ 0.1-1秒**: 可接受的執行時間
- **⚠️ 1-2秒**: 建議優化
- **🐌 >2秒**: 需要性能調優

### 覆蓋率統計
- 目標覆蓋率: **80%** 以上
- 包含正常流程和異常處理
- 涵蓋邊界條件測試

## 🛠️ 測試工具使用

### 測試控制台功能
- **層級選擇**: 選擇特定測試層級
- **單項執行**: 運行個別測試項目
- **批量測試**: 執行完整測試套件
- **結果分析**: 查看詳細測試報告

### 結果查看
- **統計概覽**: 成功率、執行時間、覆蓋率
- **詳細結果**: 每個測試的具體結果
- **效能分析**: 執行時間分布和優化建議
- **匯出報告**: JSON 格式或文字報告

## 🔧 故障排除

### 常見問題
1. **測試失敗率高**
   - 檢查模擬數據生成器
   - 驗證業務邏輯實現
   - 確認依賴服務狀態

2. **執行時間過長**
   - 檢查測試邏輯複雜度
   - 優化數據處理流程
   - 考慮並行執行

3. **測試不穩定**
   - 檢查異步操作處理
   - 驗證競態條件
   - 增加重試機制

### 測試最佳實踐
- 定期執行完整測試套件
- 關注失敗測試的錯誤信息
- 監控執行時間趨勢
- 保持測試數據的多樣性

## 📈 測試報告示例

```
📊 錦標賽功能測試報告
==================

📈 測試統計:
• 總測試數: 20
• 通過測試: 18
• 失敗測試: 2
• 成功率: 90.0%
• 總執行時間: 12.456秒
• 平均執行時間: 0.623秒

📋 詳細結果:
• Tournament 模型驗證: ✅ (0.045s)
• TournamentParticipant 測試: ✅ (0.123s)
• 投資組合模型測試: ✅ (0.089s)
• 績效指標模型測試: ✅ (0.067s)
• TournamentService API: ✅ (0.756s)
• Supabase 整合測試: ❌ (2.123s)
• 錯誤處理測試: ✅ (0.234s)
...

生成時間: Jul 31, 2025 at 6:30 PM
```

## 🎯 測試目標與期望

### 品質目標
- **功能正確性**: 所有核心功能按預期工作
- **效能表現**: 響應時間在可接受範圍內
- **穩定性**: 在各種條件下保持穩定運行
- **用戶體驗**: 界面響應流暢，錯誤處理友好

### 測試涵蓋範圍
- **正常流程**: 標準使用情境
- **邊界條件**: 極值和特殊情況
- **錯誤處理**: 各種異常情況
- **併發處理**: 多用戶同時操作

---

**🎉 恭喜！您已經掌握了錦標賽功能測試系統的使用方法**

透過這個全面的測試系統，您可以確保錦標賽功能的品質和穩定性，為用戶提供優秀的投資競賽體驗。

> 💡 **提示**: 建議在每次重大更新後運行完整測試套件，確保所有功能正常運作。